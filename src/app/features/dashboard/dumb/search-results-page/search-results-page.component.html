<div class="search-container">
  <div class="d-flex-center">
    <div class="pl-3 py-3">
      <ng-container *ngFor="let searchTab of activeLinksList">
          <span [class.active]="activeLink === searchTab.name" class="pointer category-link"
                (click)="activeLinkChanged.emit(searchTab.name)">{{searchTab.label}} ({{resultsCount?.[searchTab.name]}})  </span>
      </ng-container>
    </div>
  </div>
  <div class="page-container">
    <sm-search-results
      [cardTemplate]="
        activeLink === searchPages.projects ? ProjectTemplate :
        activeLink === searchPages.experiments ? ExperimentTemplate :
        activeLink === searchPages.models ? ModelsTemplate :
        activeLink === searchPages.openDatasets ? openDatasetTemplate :
        activeLink === searchPages.pipelines ? PipelineTemplate :
       ProjectTemplate"
      [results]="getResults()"
      [cardHeight]="getCardHeight()"
      [showLoadMoreButton]="getResults().length < resultsCount?.[activeLink]"
      (resultClicked)="projectClicked($event)"
      (loadMoreClicked)="loadMoreClicked.emit()">
    </sm-search-results>
  </div>

  <ng-template #ProjectTemplate let-project="result">
    <sm-project-card
      [project]="project"
      (projectCardClicked)="projectClicked($event)"
      [hideMenu]="true"
    ></sm-project-card>
  </ng-template>

  <ng-template #ExperimentTemplate let-experiment="result">
    <sm-experiment-card
      [experiment]="experiment"
      (experimentCardClicked)="experimentClicked($event)"
    ></sm-experiment-card>
  </ng-template>

  <ng-template #ModelsTemplate let-model="result">
    <sm-model-card
      [model]="model"
      (modelCardClicked)="modelClicked($event)"
    ></sm-model-card>
  </ng-template>

  <ng-template #PipelineTemplate let-pipeline="result">
    <sm-pipeline-card
      [project]="pipeline"
      [hideMenu]="true"
      (projectCardClicked)="pipelineClicked($event)"
    ></sm-pipeline-card>
  </ng-template>

  <ng-template #openDatasetTemplate let-dataset="result">
    <sm-simple-dataset-card
      [hideMenu]="true"
      [project]="dataset"
      (projectCardClicked)="openDatasetClicked($event)"
    ></sm-simple-dataset-card>
  </ng-template>

</div>
